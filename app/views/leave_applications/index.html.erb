<%= render 'side_bar/daily_office_side_bar' %>

<h1 style="margin-top:0;"><%= I18n.t 'activerecord.models.leave_application'%></h1>
<p class="subtitle">
  <%= I18n.t 'views_leave_application.total_application_prompt' %>:&nbsp;
  <%= @leave_applications.size%>
</p>

<table border="0" cellspacing="0" cellpadding="0" class="wide notices">
  <tr>
    <th width="10%" class="la">
      <%= I18n.t 'activerecord.attributes.application.title' %>
    </th>
    <th width="50%" class="la">
      <%= I18n.t 'activerecord.attributes.application.content' %>
    </th>
    <th width="25%" class="la">
      <%= I18n.t 'views_leave_application.receiver' %>
    </th>
    <th width="15%" class="la">
      <%= I18n.t 'activerecord.attributes.message.state' %>
    </th>
  </tr>
  <% @leave_applications.each do |leave_application|%>
    <tr>
      <td><%= leave_application.title%></td>
      <td>
        <%= link_to leave_application.content, leave_application, 
        :class => "admin" %>
      </td>
      <td class="inv lp">
        <%= truncate(get_has_many_model_list_name(leave_application, 
        "receivers", "real_name"), :length => 30) %>
      </td>
      <td>
        <%= truncate(get_state_of_message(leave_application), :length => 6) %>
      </td>
    </tr>
  <% end %>
</table>

<p>
  <%= link_to I18n.t('operate.new') + I18n.t('activerecord.models.leave_application'), new_leave_application_path, :class => "utility" %>
</p>
